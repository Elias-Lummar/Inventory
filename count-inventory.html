<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de Contagem</title>
  <script src="https://cdn.tailwindcss.com"></script>
 <!-- <script src="script.js" defer></script>-->
</head>
<body class="bg-gray-50">
  <!-- Header -->
  <header class="bg-black text-white p-4 flex items-center">
    <a id="back-button" class="mr-4" href="index.html">‚Üê</a>
    <h1 class="text-xl font-bold">Cadastro de Contagem</h1>
  </header>

  <!-- Formul√°rio -->
  <form id="count-form" class="p-6 space-y-6">
    <!-- Nome do Usu√°rio -->
    <div>
      <label class="block mb-2 font-bold">Nome *</label>
      <input type="text" name="user_name" required class="w-full p-3 border rounded">
    </div>

    <!-- C√≥digo do Produto -->
    <div>
      <label class="block mb-2 font-bold">C√≥digo do Produto *</label>
      <div class="flex">
        <input type="text" name="product_code" required class="w-full p-3 border rounded-l">
        <button type="button" class="bg-gray-200 px-4 border rounded-r">üì∑</button>
      </div>
    </div>

    <!-- Descri√ß√£o -->
    <div>
      <label class="block mb-2 font-bold">Descri√ß√£o *</label>
      <input type="text" name="description" required class="w-full p-3 border rounded">
    </div>

    <!-- Fator -->
    <div>
      <label class="block mb-2 font-bold">Fator</label>
      <input type="number" name="factor" value="1" class="w-full p-3 border rounded">
    </div>

    <!-- Unidades -->
    <div>
      <label class="block mb-2 font-bold">Unidades</label>
      <input type="number" name="units" value="1" class="w-full p-3 border rounded">
    </div>

    <!-- Localiza√ß√£o -->
    <div class="space-y-2">
      <label class="block font-bold">Localiza√ß√£o</label>
      <input type="text" name="location_street" placeholder="Rua" class="w-full p-3 border rounded">
      <input type="text" name="location_block" placeholder="Bloco" class="w-full p-3 border rounded">
      <input type="text" name="location_level" placeholder="N√≠vel" class="w-full p-3 border rounded">
    </div>

    <!-- Pre√ßo -->
    <div>
      <label class="block mb-2 font-bold">Pre√ßo</label>
      <input type="number" step="0.01" name="price" class="w-full p-3 border rounded">
    </div>

    <!-- N√≠vel -->
    <div>
      <label class="block mb-2 font-bold">N√≠vel</label>
      <select name="level" class="w-full p-3 border rounded">
        <option>N√≠vel 1</option>
        <option>N√≠vel 2</option>
        <option>N√≠vel 3</option>
      </select>
    </div>

    <button type="submit" class="w-full bg-yellow-400 text-black py-3 rounded-lg font-bold">
      Enviar Contagem
    </button>
  </form>

  <script>
    document.getElementById('count-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = {
        user_name: e.target.user_name.value,
        product_code: e.target.product_code.value,
        description: e.target.description.value,
        factor: e.target.factor.value,
        units: e.target.units.value,
        location: {
          street: e.target.location_street.value,
          block: e.target.location_block.value,
          level: e.target.location_level.value
        },
        price: e.target.price.value,
        level: e.target.level.value
      };

      await apiRequest('/counts', 'POST', formData);
      alert('Contagem registrada com sucesso!');
      navigateTo('inventory-list.html');
    });
  </script>
</body>
</html>