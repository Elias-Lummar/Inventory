<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inventários</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!--<script src="script.js" defer></script>-->
</head>
<body class="bg-gray-50">
  <!-- Header -->
  <header class="bg-black text-white p-4 flex items-center">
    <a id="back-button" class="mr-4" href="index.html">←</a>
    <h1 class="text-xl font-bold">Inventários</h1>
  </header>

  <!-- Lista de Inventários -->
  <main id="inventories-container" class="p-6 space-y-4">
    <!-- Os itens serão carregados dinamicamente aqui -->
  </main>

  <script>
    // Carregar inventários da API
    async function loadInventories() {
      const container = document.getElementById('inventories-container');
      const inventories = await apiRequest('/inventories');
      
      if (!inventories || inventories.length === 0) {
        container.innerHTML = '<p class="text-center text-gray-500">Nenhum inventário encontrado</p>';
        return;
      }

      inventories.forEach(inv => {
        const statusColor = inv.status === 'open' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800';
        const statusText = inv.status === 'open' ? 'Aberto para Contagem' : 'Em andamento';

        const inventoryHTML = `
          <div class="bg-white border rounded-lg p-4">
            <div class="flex justify-between items-start">
              <div>
                <h2 class="font-bold">${inv.name}</h2>
                <p class="text-sm text-gray-600">${statusText}</p>
              </div>
              <span class="px-3 py-1 rounded-full text-xs ${statusColor}">
                ${inv.status === 'open' ? 'Ativo' : 'Andamento'}
              </span>
            </div>
            
            <div class="mt-3 space-y-1">
              ${inv.counts.map((count, i) => 
                `<div class="text-sm">Contagem ${i+1}: <span class="font-medium">${count.user}</span></div>`
              ).join('')}
            </div>
            
            <div class="flex justify-end mt-4 space-x-2">
              <button class="bg-yellow-400 text-black px-3 py-1 rounded text-sm">Ver detalhes</button>
              <button class="bg-green-500 text-white px-3 py-1 rounded text-sm">Adicionar Contagem</button>
            </div>
          </div>
        `;
        
        container.innerHTML += inventoryHTML;
      });
    }

    document.addEventListener('DOMContentLoaded', loadInventories);
  </script>
</body>
</html>